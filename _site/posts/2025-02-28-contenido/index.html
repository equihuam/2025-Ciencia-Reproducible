<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Miguel Equihua">

<title>¿Qúe puedo incluir en mis documentos? – Ciencia Abierta</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/pluma-escritura.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>
<link href="../../site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">

<script src="../../site_libs/tabwid-1.1.3/tabwid.js"></script>

<link href="../../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="../../site_libs/datatables-binding-0.33/datatables.js"></script>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="../../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="../../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="../../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

<link href="../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

<link href="../../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">

<script src="../../site_libs/leaflet-1.3.1/leaflet.js"></script>

<link href="../../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">

<script src="../../site_libs/proj4-2.6.2/proj4.min.js"></script>

<script src="../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>

<link href="../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">

<script src="../../site_libs/leaflet-binding-2.2.2/leaflet.js"></script>

<script src="../../site_libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>

<script src="../../site_libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>

<link href="../../site_libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css" rel="stylesheet">

<script src="../../site_libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js"></script>

<link href="../../site_libs/fontawesome-4.7.0/font-awesome.min.css" rel="stylesheet">


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Ciencia Abierta</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Buscar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Navegación de palanca" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Acerca de</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/equihuam/2025-ciencia-reproducible"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://x.com/"> <i class="bi bi-x" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">¿Qúe puedo incluir en mis documentos?</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">mapas</div>
                <div class="quarto-category">tablas</div>
                <div class="quarto-category">gráficas</div>
                <div class="quarto-category">galería</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Autor/a</div>
      <div class="quarto-title-meta-contents">
               <p>Miguel Equihua </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Fecha de publicación</div>
      <div class="quarto-title-meta-contents">
        <p class="date">Xalapa, Ver., 28 de febrero, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">En esta página</h2>
   
  <ul>
  <li><a href="#visita-la-galería-de-quarto" id="toc-visita-la-galería-de-quarto" class="nav-link active" data-scroll-target="#visita-la-galería-de-quarto">Visita la galería de Quarto</a></li>
  <li><a href="#platiquemos-sobre-tus-intereses" id="toc-platiquemos-sobre-tus-intereses" class="nav-link" data-scroll-target="#platiquemos-sobre-tus-intereses">Platiquemos sobre tus intereses</a>
  <ul class="collapse">
  <li><a href="#algunas-ideas-para-animar-la-charla" id="toc-algunas-ideas-para-animar-la-charla" class="nav-link" data-scroll-target="#algunas-ideas-para-animar-la-charla">Algunas ideas para animar la charla</a></li>
  </ul></li>
  <li><a href="#datos-en-mi-equipo" id="toc-datos-en-mi-equipo" class="nav-link" data-scroll-target="#datos-en-mi-equipo">Datos en Mi equipo</a>
  <ul class="collapse">
  <li><a href="#datos-excel" id="toc-datos-excel" class="nav-link" data-scroll-target="#datos-excel">Datos Excel</a></li>
  </ul></li>
  <li><a href="#un-bonito-mapa" id="toc-un-bonito-mapa" class="nav-link" data-scroll-target="#un-bonito-mapa">Un bonito mapa</a></li>
  <li><a href="#incluir-videos" id="toc-incluir-videos" class="nav-link" data-scroll-target="#incluir-videos">Incluir videos</a></li>
  <li><a href="#datos-mediante-captura-con-el-celular" id="toc-datos-mediante-captura-con-el-celular" class="nav-link" data-scroll-target="#datos-mediante-captura-con-el-celular">Datos mediante captura con el celular</a></li>
  <li><a href="#lecturas-sugeridas" id="toc-lecturas-sugeridas" class="nav-link" data-scroll-target="#lecturas-sugeridas">Lecturas sugeridas</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="visita-la-galería-de-quarto" class="level2">
<h2 class="anchored" data-anchor-id="visita-la-galería-de-quarto">Visita la galería de Quarto</h2>
<iframe width="780" height="500" src="https://quarto.org/docs/gallery/" title="Webpage example" style="border:5px solid brown;">
</iframe>
</section>
<section id="platiquemos-sobre-tus-intereses" class="level2">
<h2 class="anchored" data-anchor-id="platiquemos-sobre-tus-intereses">Platiquemos sobre tus intereses</h2>
<p>Tu Blog contendrá alguno o varios de los siguientes componentes:</p>
<ul>
<li>Tablas de datos.</li>
<li>Gráficas.</li>
<li>Mapas.</li>
<li>Análisis de datos geográficos.</li>
<li>Análisis de series de tiempo.</li>
<li>Modelos matemáticos.</li>
<li>Análisis estadísticos.</li>
<li>Análisis de datos moleculares.</li>
<li>Análisis de imágenes.</li>
<li>Análisis de audio.</li>
<li>Alguna otra cosa que sea de tu interés.</li>
</ul>
<p>Sugiero hacer una reflexión sobre esto y considerar también de qué manera se obtendrán los datos, procesarán y presentarán.</p>
<section id="algunas-ideas-para-animar-la-charla" class="level3">
<h3 class="anchored" data-anchor-id="algunas-ideas-para-animar-la-charla">Algunas ideas para animar la charla</h3>
<p>Una cosa que podría ser de tu interés es <em>cosechar datos</em> del Internet. <strong>R</strong> tiene bibliotecas bbastante competenes para hacerlo, pero te invito primero a pensarlo y precisar la idea, para entonces dedicar alguna sesión del taller en el futuro próximo all tema. Junto con esto va una reflexión sobre <em>datos abiertos</em> que tengo previsto tratar y junto con esto alguunos asuntos sobre derechos de autor y licenciamiento del contenido que tu mismo producirás. En tanto resolvemos esta interés, una cosa más sencilla es trabajar con datos que ya tengo en mi poseción, es decir un Excel o documento semejante en mi máquina.</p>
</section>
</section>
<section id="datos-en-mi-equipo" class="level2">
<h2 class="anchored" data-anchor-id="datos-en-mi-equipo">Datos en Mi equipo</h2>
<p>Obviamente, la forma más sencilla de acceder a datos es cuando los tenemos en nuestro propio equipo. En este caso lo usual es que sea alguno de los formatos de Microsoft (Word o Excel) o algún formato genérico como los identificados como <strong>txt</strong> (<em>texto plano</em>) o <strong>csv</strong> (<em>valores separados por comas</em>). Puuede haber otras variantes de archivos de datos, como <strong>kml</strong>, <strong>GeoJson</strong>, <strong>GeoTIFF</strong> o <strong>shp</strong> (<em>shape file</em>) usuales en la gestión de <em>datos geográficos</em>. En Genómica está el formato <strong>fasta</strong>, que también cuenta con bibliotecas adecuadas en <em>R</em>. Hay una correspondiente variedad de recursos para leer todos estos tipos de datos en <em>R</em> así como para analizarlos y preparar resúmenes, modelos y gráficos de interés. A continuación veremos algunos ejemplos sencillos para tener una idea del proceso general. Para nuestros fines didácticos veamos como leer datos de Excel.</p>
<section id="datos-excel" class="level3">
<h3 class="anchored" data-anchor-id="datos-excel">Datos Excel</h3>
<p>Tengo este archivo de datos obtenidos por D.L. Cunningham de la Universidad de Cornell. Son registros de masa corporal (g) de pollos de acuerdo con su posición en la <em>jerarquía de picotazos</em> (<a href="#tbl-pollos" class="quarto-xref">Tabla&nbsp;1</a>). Veamos los datos. En el procceso de demostración también te comparto como construir una tabla en formato <em>publicable</em> con la biblioteca <code>flextable</code>. Otra posibilidad para trabajar tablas es la biblioteca <code>DT</code>, más orientada a construir tablas que serán utilizadas en forma interactiva.</p>
<p><a href="https://docs.google.com/spreadsheets/d/101en_5PHLLg0T6L7HtonPzxZ7SbjSH4S/edit?usp=sharing&amp;ouid=117903674529989673913&amp;rtpof=true&amp;sd=true">Aquí están los datos</a></p>
<div class="cell">
<details class="code-fold">
<summary>muestra el escript:</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, ggplot2, readxl, flextable)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>pollos_peso <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"datos/peck_odr.xls"</span>, <span class="at">skip =</span> <span class="dv">2</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>pollos_peso <span class="sc">|&gt;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flextable</span>() <span class="sc">|&gt;</span> </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">width</span>(<span class="at">j =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">width =</span> <span class="dv">25</span>, <span class="at">unit =</span> <span class="st">"mm"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_header_labels</span>(<span class="st">"Jerarquía</span><span class="sc">\n</span><span class="st">por picoteo"</span> <span class="ot">=</span> <span class="st">"Posición"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">gallinero =</span> <span class="st">"Gallinero"</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">peso =</span> <span class="st">"Peso</span><span class="sc">\n</span><span class="st">(g)"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-pollos" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-pollos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabla&nbsp;1: Jearquía de Picotazos
</figcaption>
<div aria-describedby="tbl-pollos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-cfb9557a{}.cl-cfa83c54{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-cfaeaab2{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-cfaeed74{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-cfaeed88{width:0.984in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-cfaeed92{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-cfaeed93{width:0.984in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-cfaeed9c{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-cfaeeda6{width:0.984in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-cfb9557a"><thead><tr style="overflow-wrap:break-word;"><th class="cl-cfaeed74"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">Posición</span></p></th><th class="cl-cfaeed88"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">Gallinero 1</span></p></th><th class="cl-cfaeed88"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">Gallinero 2</span></p></th><th class="cl-cfaeed88"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">Gallinero 3</span></p></th><th class="cl-cfaeed88"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">Gallinero 4</span></p></th><th class="cl-cfaeed88"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">Gallinero 5</span></p></th><th class="cl-cfaeed88"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">Gallinero 6</span></p></th><th class="cl-cfaeed88"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">Gallinero 7</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-cfaeed92"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,880</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,300</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,600</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,380</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,800</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,000</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,680</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-cfaeed92"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">2</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,920</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,700</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,830</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,520</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,780</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,740</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,460</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-cfaeed92"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">3</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,600</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,500</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,520</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,520</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,360</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,520</span></p></td><td class="cl-cfaeed93"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,760</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-cfaeed9c"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">4</span></p></td><td class="cl-cfaeeda6"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,830</span></p></td><td class="cl-cfaeeda6"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,880</span></p></td><td class="cl-cfaeeda6"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,820</span></p></td><td class="cl-cfaeeda6"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,380</span></p></td><td class="cl-cfaeeda6"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">2,000</span></p></td><td class="cl-cfaeeda6"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">2,000</span></p></td><td class="cl-cfaeeda6"><p class="cl-cfaeaab2"><span class="cl-cfa83c54">1,800</span></p></td></tr></tbody></table></div>
</div>
</div>
</figure>
</div>
</div>
<p>Los datos están en un formato poco conveniente para un análisis general. Hagamos algunas operaciones para ponerlos en una forma más adecuada. Básicamente buscaremos cambiar del formato extendido, bueno para visualizar, a uno apilado, más apropiado para el análisis estadístico</p>
<div class="cell">
<details class="code-fold">
<summary>muestra el escript:</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pollos_peso <span class="ot">&lt;-</span> pollos_peso <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">rename</span>(<span class="at">jerarquia =</span> <span class="st">`</span><span class="at">Jerarquía</span><span class="sc">\n</span><span class="at">por picoteo</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">`</span><span class="at">Gallinero 1</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">Gallinero 7</span><span class="st">`</span>, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">names_to =</span> <span class="st">"gallinero"</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">values_to =</span> <span class="st">"peso"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">mutate</span>(<span class="at">gallinero =</span> <span class="fu">factor</span>(gallinero),</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">jerarquia =</span> <span class="fu">as.integer</span>(jerarquia)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">arrange</span>(gallinero)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="line-block"></div>
<p>Aprovecharé la nueva disposición para demostrar el uso de la biblioteca <code>DT</code> que define la función <code>datatable</code> y un montón de otros recursos para dar formato tabular y anotar los datos de interés.</p>
<div class="line-block"></div>
<div class="cell">
<details class="code-fold">
<summary>muestra el escript:</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>pollos_peso <span class="sc">|&gt;</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">colnames =</span> <span class="fu">c</span>(<span class="st">"Posición"</span>, <span class="st">"id-Gallinero"</span>, <span class="st">"Peso"</span>)) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-061e84060726d976cc74" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-061e84060726d976cc74">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28"],[1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4],["Gallinero 1","Gallinero 1","Gallinero 1","Gallinero 1","Gallinero 2","Gallinero 2","Gallinero 2","Gallinero 2","Gallinero 3","Gallinero 3","Gallinero 3","Gallinero 3","Gallinero 4","Gallinero 4","Gallinero 4","Gallinero 4","Gallinero 5","Gallinero 5","Gallinero 5","Gallinero 5","Gallinero 6","Gallinero 6","Gallinero 6","Gallinero 6","Gallinero 7","Gallinero 7","Gallinero 7","Gallinero 7"],[1880,1920,1600,1830,1300,1700,1500,1880,1600,1830,1520,1820,1380,1520,1520,1380,1800,1780,1360,2000,1000,1740,1520,2000,1680,1460,1760,1800]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Posición<\/th>\n      <th>id-Gallinero<\/th>\n      <th>Peso<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"jerarquia","targets":1},{"name":"gallinero","targets":2},{"name":"peso","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="line-block"><br>
</div>
<p>Otra cosa que puedo hacer ahora es construir un gráfico con los datos utilizando la bibliotea <code>ggplot2</code>, muy capáz de producir gráficos atractivos, incluso como para publicaciones formales. Piensa en qué gráficos te gustaría inlcuir en el blog que estas construyendo. En este enlace encontraras una <a href="https://r-graph-gallery.com/">galería de gráficos</a> que pueden ayudar a estimular tu imaginación e interés.</p>
<div class="line-block"></div>
<div class="cell">
<details class="code-fold">
<summary>muestra el escript:</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pollos_peso, <span class="fu">aes</span>(<span class="at">x =</span> jerarquia, <span class="at">y =</span> peso)) <span class="sc">+</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"darkgreen"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-4-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div class="line-block"></div>
<p>¿qué análisis sugieres habría que hacer ahora? ¿Cómo lo presentarías para asegurar que tu proceso analítico sea reproducible?</p>
<div class="line-block"></div>
</section>
</section>
<section id="un-bonito-mapa" class="level2">
<h2 class="anchored" data-anchor-id="un-bonito-mapa">Un bonito mapa</h2>
<p>¿Piensas que hacer mapas impactantes es cosa de una élite entrenada en GIS? Quizás la belleza de muchos mapas que encontramos por ahí justifica pensar así. Pero ahora podemos aspirar a incluir hermosos mapas en nuestros documentos, pues el acceso a <em>recursos abiertos</em> muy competentes de mapeo ha cambiado mucho. En <strong>R</strong> tenemos ahora bibliotecas como <code>sf</code>, <code>raster</code>, <code>terra</code>, <code>leaflet</code>, <code>ggplot2</code> y <code>tmap</code>, además del software especializado <strong>QGIS</strong>,</p>
<p>Con <code>leaflet</code> incluir mapas, incluso interactivos, es bastante sencillo. Veamos como empezar con esta biblioteca con unas breves instrucciones.</p>
<div class="cell">
<details class="code-fold">
<summary>muestra el escript:</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet) <span class="co"># cargar la biblioteca requerida.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>basemap <span class="ot">&lt;-</span> <span class="fu">leaflet</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ubicación de la zona de interés y nivel de zoom inicial</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setView</span>(<span class="at">lng =</span> <span class="sc">-</span><span class="fl">96.91841</span>, <span class="at">lat =</span> <span class="fl">19.515157</span>, <span class="at">zoom =</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Añade proveedor de mapa</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"OpenStreetMap"</span>,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Dale un nombre a la capa</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="st">"Mapa-OpenStreet"</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># despliega el mapa</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>basemap </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-4d392f758dfa02ccdc52" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-4d392f758dfa02ccdc52">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[19.515157,-96.91840999999999],20,[]],"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,"Mapa-OpenStreet",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]}]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>&nbsp; &nbsp;</p>
<p>Agregar capas, marcadores, etc. Tampoco es muy complicado. Veamos un ejemplo.</p>
<p>&nbsp; &nbsp;</p>
<div class="cell">
<details class="code-fold">
<summary>muestra el escript:</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>icon.fa <span class="ot">&lt;-</span> <span class="fu">makeAwesomeIcon</span>(<span class="at">icon =</span> <span class="st">"bicycle"</span>, <span class="at">markerColor =</span> <span class="st">"green"</span>,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">library =</span> <span class="st">"fa"</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">iconColor =</span> <span class="st">"red"</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>map_1 <span class="ot">&lt;-</span> basemap <span class="sc">%&gt;%</span> </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(<span class="st">"Esri.WorldImagery"</span>, </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">group =</span> <span class="st">"ESRI"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addWMSTiles</span>(</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"http://gaia.inegi.org.mx/NLB/tunnel/wms/wms61?"</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">layers =</span> <span class="st">"Ortofotos"</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">WMSTileOptions</span>(<span class="at">format =</span> <span class="st">"image/png"</span>, <span class="at">transparent =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">attribution =</span> <span class="st">"Inegi"</span>,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="st">"Inegi-ortofoto"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addWMSTiles</span>(</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"http://gaia.inegi.org.mx/NLB/tunnel/wms/wms61?"</span>,</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">layers =</span> <span class="st">"c407"</span>,</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">WMSTileOptions</span>(<span class="at">format =</span> <span class="st">"image/png"</span>, <span class="at">transparent =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">attribution =</span> <span class="st">"Inegi"</span>,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="st">"Humedad del suelo"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addAwesomeMarkers</span>(</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">lat =</span> <span class="fl">19.5152</span>,</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">lng =</span> <span class="sc">-</span><span class="fl">96.91841</span>,</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">"Starting point"</span>,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">icon =</span> icon.fa</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Layers control</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addLayersControl</span>(</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">baseGroups =</span> <span class="fu">c</span>(</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Mapa-OpenStreet"</span>,</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>      <span class="st">"ESRI"</span>,</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Inegi-ortofoto"</span>,</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Humedad del suelo"</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">layersControlOptions</span>(<span class="at">collapsed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>map_1</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-cf22d52ba32d0f59229d" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-cf22d52ba32d0f59229d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[19.515157,-96.91840999999999],20,[]],"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,"Mapa-OpenStreet",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"ESRI",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addWMSTiles","args":["http://gaia.inegi.org.mx/NLB/tunnel/wms/wms61?",null,"Inegi-ortofoto",{"styles":"","format":"image/png","transparent":true,"version":"1.1.1","attribution":"Inegi","layers":"Ortofotos"}]},{"method":"addWMSTiles","args":["http://gaia.inegi.org.mx/NLB/tunnel/wms/wms61?",null,"Humedad del suelo",{"styles":"","format":"image/png","transparent":true,"version":"1.1.1","attribution":"Inegi","layers":"c407"}]},{"method":"addAwesomeMarkers","args":[19.5152,-96.91840999999999,{"icon":"bicycle","markerColor":"green","iconColor":"red","spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","prefix":"fa"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,"Starting point",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":[["Mapa-OpenStreet","ESRI","Inegi-ortofoto","Humedad del suelo"],[],{"collapsed":false,"autoZIndex":true,"position":"topright"}]}],"limits":{"lat":[19.5152,19.5152],"lng":[-96.91840999999999,-96.91840999999999]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="line-block"><br>
</div>
<p>Otra posibilidad para producir documentos con mapas más bien de tipo impreso es la biblioteca <code>tmap</code> podemos hacer cosas como las siguiente. Usaremos los datos contenidos en el paquete <code>spData</code> para ejemplificar. Aquí está un <a href="https://rpubs.com/yianlin/901579">tutorial sobre esta biblioteca.</a></p>
<div class="line-block"><br>
</div>
<div class="cell">
<details class="code-fold">
<summary>muestra el escript:</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tmap, spData, dplyr)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"urban_agglomerations"</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>urb_1970_2030 <span class="ot">&lt;-</span>  urban_agglomerations <span class="sc">%&gt;%</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1970</span>, <span class="dv">1990</span>, <span class="dv">2010</span>, <span class="dv">2030</span>))</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"World"</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(World) <span class="sc">+</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">fill =</span> <span class="st">"lightblue"</span>) <span class="sc">+</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_crs</span>(<span class="st">"auto"</span>) <span class="sc">+</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(urb_1970_2030, ) <span class="sc">+</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_symbols</span>(<span class="at">fill =</span> <span class="st">"black"</span>, </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">col =</span> <span class="st">"white"</span>, </span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="st">"population_millions"</span>, </span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>             <span class="at">size.legend =</span> <span class="fu">tm_legend</span>(<span class="at">title =</span> <span class="st">"Población (millones)"</span>)) <span class="sc">+</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_facets_wrap</span>(<span class="at">by =</span> <span class="st">"year"</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div class="line-block"></div>
<p>A pesar de lo dicho arriba, con esta biblioteca también se puede incursionar en preparar productos geográficos dinámicos, como sería una animación.</p>
<div class="line-block"></div>
<div class="cell">
<details class="code-fold">
<summary>muestra el escript:</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>urb_anim <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(World) <span class="sc">+</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_crs</span>(<span class="st">"auto"</span>) <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(urban_agglomerations) <span class="sc">+</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_symbols</span>(<span class="at">size =</span> <span class="st">"population_millions"</span>, <span class="at">fill =</span> <span class="st">"green"</span>) <span class="sc">+</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_facets_wrap</span>(<span class="at">by =</span> <span class="st">"year"</span>, <span class="at">nrow =</span> <span class="dv">1</span>, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">free.coords =</span> <span class="cn">FALSE</span>) </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>anim <span class="ot">&lt;-</span> urb_anim <span class="sc">%&gt;%</span>     </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tmap_animation</span>(<span class="at">filename =</span> <span class="st">"img/urb_anim.gif"</span>, <span class="at">delay =</span> <span class="dv">45</span>, <span class="at">verbose =</span> false);</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Creating frames</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Creating animation
Animation saved to C:\Users\equih\0 Versiones\ciencia-reproducible\2025\posts\2025-02-28-contenido\img\urb_anim.gif </code></pre>
</div>
<details class="code-fold">
<summary>muestra el escript:</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"img/urb_anim.gif"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="img/urb_anim.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="img/urb_anim.gif" class="img-fluid figure-img"></a></p>
</figure>
</div>
</div>
</div>
<div class="line-block"></div>
</section>
<section id="incluir-videos" class="level2">
<h2 class="anchored" data-anchor-id="incluir-videos">Incluir videos</h2>
<p>Si por cualquier razón encuentras justificado o importante mostrar algo que está en forma de video, fácilmente puedes agregarlo a tu blog. Tan simple como poner algo semejante a esto directamente en el texto. Es decir no se requiere un <em>trozo de código</em> ( <em>code chunk</em>).</p>
<p><span style="color:green;"><span class="math inline">\(\{\{&lt;\)</span> video https://youtu.be/wo9vZccmqwc start=“10” <span class="math inline">\(&gt;\}\}\)</span></span></p>
<div class="line-block"><br>
</div>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/wo9vZccmqwc?start=10" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
</section>
<section id="datos-mediante-captura-con-el-celular" class="level2">
<h2 class="anchored" data-anchor-id="datos-mediante-captura-con-el-celular">Datos mediante captura con el celular</h2>
<p>Usar las plataformas móbiles para capturar datos en campo tiene una historia que va a los primeros dispositivos llamados <strong>PDA</strong> (<em>Personal Digital Assistant</em>) allá por los mediados de 1990. Siguieron los avances que condujeron a la aparición del iPhone® y del sistema Android®. La aparición de Android incentivó el desarrollo que apareció en 2010 como <em>Open Data Kit</em> (<strong>ODK</strong>). Un poco más adelante un grupo de la Universidad de Harvard desarrolló la aplicación <em>Kobo</em>, basada en el mismo motor de software de <strong>ODK</strong>, pero con una estrategia de servico distinta. En cualquier caso, para la adquisición de datos en campo la base <strong>ODK</strong> es sin duda un estandar mundial <span class="citation" data-cites="hartung_open_2010 brunette_open_2023">(<a href="#ref-brunette_open_2023" role="doc-biblioref">Brunette &amp; Hartung, 2023</a>; <a href="#ref-hartung_open_2010" role="doc-biblioref">Hartung et&nbsp;al., 2010</a>)</span>. No quiero entrar en los detalles de cada solución, sólo quiero que conozcas de su existencia, para saber más de ellas puedes ir a sus respectivos sitios Web: <a href="https://getodk.org/">odkcloud</a> y <a href="https://www.kobotoolbox.org/">kobotoolbox</a>. Hay bibliotecas en <strong>R</strong> para acceder a cualquiera de estas dos soluciones: <code>ruODK</code>, <code>odkr</code> y <code>KoboconnectR</code>, por ejemplo.</p>
<p>Otra opción interesante está en proceso de desarrollo actualmente. La encuentro viable como para satisfacer las neesidades de proyectos muy pequeños en estos momentos. Se trata de los recursos que ofrece la biblioteca <code>surveydown</code>. <a href="https://bastianolea.rbind.io/blog/surveydown_encuestas/">Aquí te dejo un tutorial de ejemplo</a> sobre como aprovechar este paquete desde <em>Quarto</em>.</p>
</section>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<section id="lecturas-sugeridas" class="level2">
<h2 class="anchored" data-anchor-id="lecturas-sugeridas">Lecturas sugeridas</h2>
<div id="ref-brunette_open_2023" class="csl-entry" role="listitem">
Brunette, W., &amp; Hartung, C. (2023). The <span>Open</span> <span>Data</span> <span>Kit</span> <span>Project</span>. En T. Madon, A. J. Gadgil, R. Anderson, L. Casaburi, K. Lee, &amp; A. Rezaee (Eds.), <em>Introduction to <span>Development</span> <span>Engineering</span>: <span>A</span> <span>Framework</span> with <span>Applications</span> from the <span>Field</span></em> (pp. 613-637). Springer International Publishing. <a href="https://doi.org/10.1007/978-3-030-86065-3_23">https://doi.org/10.1007/978-3-030-86065-3_23</a>
</div>
<div id="ref-hartung_open_2010" class="csl-entry" role="listitem">
Hartung, C., Lerer, A., Anokwa, Y., Tseng, C., Brunette, W., &amp; Borriello, G. (2010). Open data kit: tools to build information services for developing regions. <em>Proceedings of the 4th <span>ACM</span>/<span>IEEE</span> <span>International</span> <span>Conference</span> on <span>Information</span> and <span>Communication</span> <span>Technologies</span> and <span>Development</span></em>, 1-12. <a href="https://doi.org/10.1145/2369220.2369236">https://doi.org/10.1145/2369220.2369236</a>
</div>
</section>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","selector":".lightbox","descPosition":"bottom","loop":false,"openEffect":"zoom"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>