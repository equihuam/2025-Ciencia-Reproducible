<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Miguel Equihua">

<title>¿Qué tipo de proyecto presenta mi blog? – Ciencia Abierta</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/pluma-escritura.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Ciencia Abierta</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Buscar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Navegación de palanca" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Acerca de</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/equihuam/2025-ciencia-reproducible"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://x.com/"> <i class="bi bi-x" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">¿Qué tipo de proyecto presenta mi blog?</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">tipos de estudio</div>
                <div class="quarto-category">experimento</div>
                <div class="quarto-category">muestreo</div>
                <div class="quarto-category">encuesta</div>
                <div class="quarto-category">divulgación</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Autor/a</div>
      <div class="quarto-title-meta-contents">
               <p>Miguel Equihua </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Fecha de publicación</div>
      <div class="quarto-title-meta-contents">
        <p class="date">Xalapa, Ver., 21 de marzo, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    <div class="quarto-alternate-formats"><h2>Otros formatos</h2><ul><li><a href="index.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Los proyectos que suelen abordarse en una especialización científca o tecnológica abordan desafíos de <strong>identificación y medición de relaciones causales</strong>, estimación del estado de variables ambientales, demográficas, económicas, etc., representación gráfica de procesos, mecanismos o de la distribución geográfica de variables de interés. También puede interesar la construcción de formas de comunicación efectiva a actores relevantes pero no especializados en términos de preparación universitaria formal. Será tu desafío precisar la naturaleza del proyecto que será la base formal de tu <strong>Blog</strong>. Recuerda mantener una perspectiva de <a href="../../posts/2025-03-28-storytelling-con-datos/index.html"><em>narrativa basada en datos</em></a>, y de la importancia de la <em>trazabilidad</em> de la evidencia y de los procesos analíticos utilizados.</p>
<p>Para ayudarte a poner tus intereses en perspectiva conviene hablar sobre como se caractefrizan generalmente los tipos de estudio científicos y tecnológicos. Un primer asunto es considerar si se trata de estudios que se basaran en datos ya existentes (<em>retrospectiva</em>) o datos nuevos que se planea producir (<em>prospectivo</em>).</p>
<p>Otro aspecto a considerar es si para los fines del trabajo se requiere una sóla medición en el tiempo (<em>transversal</em>) o si se requiere dar sguimiento a la evolución del fenómeno con mediciones repetidas varias veces a lo largo del tiempo (<em>longitudinal</em>).</p>
<p>Finalmente es necesario resolver si los propósitos del estudio se requiere caracterizar una sóla población objetivo (<em>descriptivo</em>) o si interesa comparar y contrastar dos o más poblaciones (<em>comparativo</em>). Desde luego por <strong>población</strong> me refiero a la idea estadística que propone una definición abstracta de un conjunto de entidades observables, que se caracterizan con referencia precisa a un conjunto de atributos medibles o variables concretas.</p>
<p>A partir de estos elementos es posible clasificar los tipos de estudios que se realizan. Desafortunadamente, las distintas disciplinas tienden a denominar cada combinación de atributos de maneras algo peculiares. No me ocuparé de eso, lo que interesa aquí es ayudarte a clarificar la naturaleza de tu proyecto. Usualmente un estudio observacional, y descriptivo y retrospectivo corresponde con la práctica de <em>revisión de casos</em> o de análisis de <em>microdatos censales</em> (es decir los cuestionarios individuales levantados en campo), esto es lo que explica <em>INEGI</em> que hace como <a href="https://www.inegi.org.mx/programas/ca/2022/#microdatos">procedimiento para obtenerlos</a>. Desde luego, esto también se puede hacer con un propósito comparativo, los médicos y epidemiólogos lo llaman estudio de <em>casos y controles</em>, o <em>perspectiva histórica</em> tú, ¿cómo lo llamarías?. Finalmente, si el planteamiento es experimental y prospectivo, estás en el ámbito de un <em>experimento controlado</em>.</p>
<p>Podemos decir, en resumen, que los estudios pueden concebirse por muy distintas razones, ningúna mejor que otra en general, cada una más bien sencible y adecuada a lo que la siruación de interés requiere:</p>
<ul>
<li><strong>Describir</strong> patrones característicos en algo.</li>
<li><strong>Inferir</strong> la presencia o estado de algo a partir de evidencias disponibles.</li>
<li><strong>Predecir</strong> el estado futuro de algo de nuestro interés.</li>
<li><strong>Prescribir</strong> o dar inidicaciones de como proceder para lograr algo.</li>
<li><strong>Explorar</strong> algo para identificar aspectos que podrían ser de nuestro interés.</li>
<li><strong>Comprender las causas</strong> que <em>gobiernan</em> el comoportamiento de un sistema.</li>
<li>Descubrir los <strong>mecanísmos</strong> detallados que definen como se comporta algo.</li>
<li><strong>Definir un problema</strong>, es decir, identificar el sistema y sus condiciones de interés.</li>
</ul>
<p>En todos estos casos existe una gran oferta de métodos estadísticos de procesamiento de datos para evitar el <em>efecto distractor</em> de los factores y procesos de confusión que dificultan comprender la consistencia y relevancia de los hallazgos científicos y tecnológicos. Recientemente se ha avanzado mucho a este respecto con el uso de diagramas causales y el entendimiento de los patrones de correlación que cabría esperar en tus datos, suponiendo que la proposición causal que imaginas para explicarlas, sea razonablemente apegada al proceso que estas analizando. Estos diagramas son conocidos como <strong>DAG</strong> (<em>Directed Acyclic Graphs</em>) y encontraras una referencia interesante a ellos en <span class="citation" data-cites="pearl_libro_2020">(<a href="#ref-pearl_libro_2020" role="doc-biblioref">Pearl &amp; Mackenzie, 2020</a>)</span>.</p>
<p>Si tu estudio es más de tipo retrospectivo es decir buscas analizar datos estadísticos o vas a realizr una encuesta, el libro en línea de <span class="citation" data-cites="velasquez_exploring_nodate">(<a href="#ref-velasquez_exploring_nodate" role="doc-biblioref">Zimmer, 2024</a>)</span> es una fuente iteresante. Si por el contrario, te inclinas por un trabajo del tipo de experimento controlado, te sugiero el libro de <span class="citation" data-cites="lawson_design_2014">(<a href="#ref-lawson_design_2014" role="doc-biblioref">Lawson, 2014</a>)</span>. Finalmente, te sugiero consideres también el punto de vista que propone para <strong>repensar el uso de la estadística</strong> este otro autor <span class="citation" data-cites="mcelreath_statistical_2020">(<a href="#ref-mcelreath_statistical_2020" role="doc-biblioref">McElreath, 2020</a>)</span>. Puede interesrte también ete artíulo sobre los datos abiertos que ofrece <a href="https://rde.inegi.org.mx/index.php/2020/12/02/importinegi-un-paquete-de-r-para-descargar-y-gestionar-bases-de-datos-del-inegi/">Inegi y la bilioteca para <strong>R</strong></a> que ha desarrollado. Este otro es un ejemplo detallado de <a href="https://revistasinvestigacion.lasalle.mx/index.php/relais/article/download/4122/3778/27670">acceso y procesamiento de microdatos</a>. Algo semejante ofrece este artículo de <span class="citation" data-cites="castro_usando_2021">Castro (<a href="#ref-castro_usando_2021" role="doc-biblioref">2021</a>)</span> y está también el libro completo en línea d <span class="citation" data-cites="escoto_castillo_encuesta2021">Escoto Castillo (<a href="#ref-escoto_castillo_encuesta2021" role="doc-biblioref">2021</a>)</span>, sobre como usar microdato para analizar el mercado de tabajo .</p>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<section id="lecturas-sugeridas" class="level2">
<h2 class="anchored" data-anchor-id="lecturas-sugeridas">Lecturas sugeridas</h2>
<div id="ref-castro_usando_2021" class="csl-entry" role="listitem">
Castro, C. D. P. (2021). Usando <span>R</span> para jugar con los microdatos del <span>INEGI</span>. En <em>tacosdedatos</em>. <a href="https://bit.ly/3Fz35Vh">https://bit.ly/3Fz35Vh</a>
</div>
<div id="ref-escoto_castillo_encuesta2021" class="csl-entry" role="listitem">
Escoto Castillo, A. R. (2021). <em>¿<span>Cómo</span> empezar a estudiar el mercado de trabajo en <span>México</span>? (<span>Una</span> introducción al análisis estadístico con <span>R</span> aplicado a la <span>Encuesta</span> <span>Nacional</span> de <span>Ocupación</span> y <span>Empleo</span>)</em>. UNAM. <a href="https://bit.ly/3XRrxYa">https://bit.ly/3XRrxYa</a>
</div>
<div id="ref-lawson_design_2014" class="csl-entry" role="listitem">
Lawson, J. (2014). <em>Design and <span>Analysis</span> of <span>Experiments</span> with <span>R</span></em>. CRC press. <a href="https://bit.ly/3DR0ipN">https://bit.ly/3DR0ipN</a>
</div>
<div id="ref-mcelreath_statistical_2020" class="csl-entry" role="listitem">
McElreath, R. (2020). <em>Statistical <span>Rethinking</span> <span></span> <span>A</span> <span>Bayesian</span> <span>Course</span> with <span>Examples</span> in <span>R</span> and <span>Stan</span></em>. Chapman &amp; Hall: CRC Press. <a href="https://xcelab.net/rm/">https://xcelab.net/rm/</a>
</div>
<div id="ref-pearl_libro_2020" class="csl-entry" role="listitem">
Pearl, J., &amp; Mackenzie, D. (2020). <em>El libro del porqué</em>. Pasado y Presente. <a href="https://www.marcialpons.es/media/pdf/ellibrodelporquejudeapearl.pdf">https://www.marcialpons.es/media/pdf/ellibrodelporquejudeapearl.pdf</a>
</div>
<div id="ref-velasquez_exploring_nodate" class="csl-entry" role="listitem">
Zimmer, J. P., Stephanie A. (2024). <em>Exploring <span>Complex</span> <span>Survey</span> <span>Data</span> <span>Analysis</span> <span>Using</span> <span>R</span></em>. Chapman &amp; Hall: CRC Press. <a href="https://tidy-survey-r.github.io/tidy-survey-book/">https://tidy-survey-r.github.io/tidy-survey-book/</a>
</div>
</section>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>